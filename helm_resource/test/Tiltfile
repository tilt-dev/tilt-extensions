# -*- mode: Python -*-

load('../Tiltfile', 'helm_resource')

docker_build(
  'helloworld-image',
  './src',
  dockerfile='./Dockerfile')

# The ./helloworld helm chart is the default
# chart generated by 'helm create'
helm_resource(
  'helloworld',
  './helloworld',
  deps=['./helloworld'],
  image_deps=['helloworld-image'],
  image_keys=[('image.repository', 'image.tag')])

k8s_resource(
  'helloworld',
  port_forwards=['8080:80'])
